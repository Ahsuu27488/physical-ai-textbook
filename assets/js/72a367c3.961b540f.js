"use strict";(globalThis.webpackChunkmy_website_1=globalThis.webpackChunkmy_website_1||[]).push([[7635],{6594:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"module-1/lesson-2-nodes-topics-services","title":"Lesson 2 - Nodes, Topics, and Services","description":"Learning Objectives","source":"@site/docs/module-1/lesson-2-nodes-topics-services.md","sourceDirName":"module-1","slug":"/module-1/lesson-2-nodes-topics-services","permalink":"/docs/module-1/lesson-2-nodes-topics-services","draft":false,"unlisted":false,"editUrl":"https://github.com/Ahsuu27488/physical-ai-textbook/tree/main/frontend/docs/module-1/lesson-2-nodes-topics-services.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Lesson 2 - Nodes, Topics, and Services","sidebar_position":4},"sidebar":"textbookSidebar","previous":{"title":"Lesson 1 - ROS 2 Architecture and DDS","permalink":"/docs/module-1/lesson-1-ros2-architecture"},"next":{"title":"Lesson 3 - Actions and Launch Files","permalink":"/docs/module-1/lesson-3-actions-and-launch-files"}}');var r=n(4848),l=n(8453);const o={title:"Lesson 2 - Nodes, Topics, and Services",sidebar_position:4},c="Lesson 2: Nodes, Topics, and Services",t={},a=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"ROS 2 Nodes",id:"ros-2-nodes",level:2},{value:"Node Creation in Python",id:"node-creation-in-python",level:3},{value:"Node Parameters",id:"node-parameters",level:3},{value:"Topics and Publishers/Subscribers",id:"topics-and-publisherssubscribers",level:2},{value:"Publishers",id:"publishers",level:3},{value:"Subscribers",id:"subscribers",level:3},{value:"Services",id:"services",level:2},{value:"Service Server",id:"service-server",level:3},{value:"Service Client",id:"service-client",level:3},{value:"ROS 2 Command Line Tools",id:"ros-2-command-line-tools",level:2},{value:"Node Commands",id:"node-commands",level:3},{value:"Topic Commands",id:"topic-commands",level:3},{value:"Service Commands",id:"service-commands",level:3},{value:"Practical Exercise: Publisher-Subscriber Pair",id:"practical-exercise-publisher-subscriber-pair",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"lesson-2-nodes-topics-and-services",children:"Lesson 2: Nodes, Topics, and Services"})}),"\n",(0,r.jsx)(s.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(s.p,{children:"By the end of this lesson, students will be able to:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Create and manage ROS 2 nodes using Python"}),"\n",(0,r.jsx)(s.li,{children:"Implement publisher and subscriber patterns"}),"\n",(0,r.jsx)(s.li,{children:"Build request/response services"}),"\n",(0,r.jsx)(s.li,{children:"Use ROS 2 command-line tools for introspection"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"ros-2-nodes",children:"ROS 2 Nodes"}),"\n",(0,r.jsx)(s.p,{children:"A node is an executable that uses ROS 2 to communicate with other nodes. Nodes are the fundamental building blocks of a ROS 2 system."}),"\n",(0,r.jsx)(s.h3,{id:"node-creation-in-python",children:"Node Creation in Python"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MyNode(Node):\n    def __init__(self):\n        super().__init__('my_node_name')\n        # Node initialization code here\n        self.get_logger().info('Node initialized')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MyNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(s.h3,{id:"node-parameters",children:"Node Parameters"}),"\n",(0,r.jsx)(s.p,{children:"Nodes can accept parameters that can be configured at runtime:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"class ParameterNode(Node):\n    def __init__(self):\n        super().__init__('parameter_node')\n\n        # Declare parameters with default values\n        self.declare_parameter('param_name', 'default_value')\n        self.declare_parameter('int_param', 42)\n\n        # Get parameter value\n        param_value = self.get_parameter('param_name').value\n"})}),"\n",(0,r.jsx)(s.h2,{id:"topics-and-publisherssubscribers",children:"Topics and Publishers/Subscribers"}),"\n",(0,r.jsx)(s.h3,{id:"publishers",children:"Publishers"}),"\n",(0,r.jsx)(s.p,{children:"A publisher sends messages to a topic:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from std_msgs.msg import String\n\nclass PublisherNode(Node):\n    def __init__(self):\n        super().__init__('publisher_node')\n        self.publisher_ = self.create_publisher(String, 'topic_name', 10)\n        timer_period = 0.5\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello from publisher'\n        self.publisher_.publish(msg)\n"})}),"\n",(0,r.jsx)(s.h3,{id:"subscribers",children:"Subscribers"}),"\n",(0,r.jsx)(s.p,{children:"A subscriber receives messages from a topic:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from std_msgs.msg import String\n\nclass SubscriberNode(Node):\n    def __init__(self):\n        super().__init__('subscriber_node')\n        self.subscription = self.create_subscription(\n            String,\n            'topic_name',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('Received: \"%s\"' % msg.data)\n"})}),"\n",(0,r.jsx)(s.h2,{id:"services",children:"Services"}),"\n",(0,r.jsx)(s.p,{children:"Services provide request/response communication:"}),"\n",(0,r.jsx)(s.h3,{id:"service-server",children:"Service Server"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from example_interfaces.srv import AddTwoInts\n\nclass ServiceServerNode(Node):\n    def __init__(self):\n        super().__init__('service_server')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\n        return response\n"})}),"\n",(0,r.jsx)(s.h3,{id:"service-client",children:"Service Client"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"from example_interfaces.srv import AddTwoInts\nimport rclpy\nfrom rclpy.node import Node\n\nclass ServiceClientNode(Node):\n    def __init__(self):\n        super().__init__('service_client')\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('Service not available, waiting again...')\n        self.req = AddTwoInts.Request()\n\n    def send_request(self, a, b):\n        self.req.a = a\n        self.req.b = b\n        self.future = self.cli.call_async(self.req)\n        rclpy.spin_until_future_complete(self, self.future)\n        return self.future.result()\n"})}),"\n",(0,r.jsx)(s.h2,{id:"ros-2-command-line-tools",children:"ROS 2 Command Line Tools"}),"\n",(0,r.jsx)(s.h3,{id:"node-commands",children:"Node Commands"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 node list"})," - List active nodes"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 node info <node_name>"})," - Get detailed information about a node"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"topic-commands",children:"Topic Commands"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 topic list"})," - List active topics"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 topic echo <topic_name>"})," - Print messages on a topic"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 topic pub <topic_name> <msg_type> <args>"})," - Publish to a topic"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"service-commands",children:"Service Commands"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 service list"})," - List active services"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 service call <service_name> <service_type> <args>"})," - Call a service"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"practical-exercise-publisher-subscriber-pair",children:"Practical Exercise: Publisher-Subscriber Pair"}),"\n",(0,r.jsx)(s.p,{children:"Create a publisher that sends velocity commands and a subscriber that processes them:"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"publisher.py:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\n\nclass VelocityPublisher(Node):\n    def __init__(self):\n        super().__init__('velocity_publisher')\n        self.publisher_ = self.create_publisher(Twist, 'cmd_vel', 10)\n        timer_period = 0.1  # 10 Hz\n        self.timer = self.create_timer(timer_period, self.publish_velocity)\n\n    def publish_velocity(self):\n        msg = Twist()\n        msg.linear.x = 1.0  # Move forward at 1 m/s\n        msg.angular.z = 0.5  # Rotate at 0.5 rad/s\n        self.publisher_.publish(msg)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    velocity_publisher = VelocityPublisher()\n    rclpy.spin(velocity_publisher)\n    velocity_publisher.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"subscriber.py:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\n\nclass VelocitySubscriber(Node):\n    def __init__(self):\n        super().__init__('velocity_subscriber')\n        self.subscription = self.create_subscription(\n            Twist,\n            'cmd_vel',\n            self.velocity_callback,\n            10)\n\n    def velocity_callback(self, msg):\n        self.get_logger().info(\n            f'Linear: ({msg.linear.x}, {msg.linear.y}, {msg.linear.z}), '\n            f'Angular: ({msg.angular.x}, {msg.angular.y}, {msg.angular.z})'\n        )\n\ndef main(args=None):\n    rclpy.init(args=args)\n    velocity_subscriber = VelocitySubscriber()\n    rclpy.spin(velocity_subscriber)\n    velocity_subscriber.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(s.p,{children:"This lesson covered the core communication patterns in ROS 2: nodes, topics, and services. These form the foundation for building distributed robotic systems where different components can communicate effectively."})]})}function u(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>c});var i=n(6540);const r={},l=i.createContext(r);function o(e){const s=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);